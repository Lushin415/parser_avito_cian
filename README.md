Микросервис для мониторинга недвижимости на Avito и Cian. Работает как backend-служба, управляемая через REST API, с поддержкой параллельного парсинга.

## Возможности

*   **Мультиплатформенность:** Одновременный парсинг Avito и Cian в рамках одной задачи.
*   **Параллельность:** Каждый источник (Avito/Cian) обрабатывается в отдельном потоке внутри задачи.
*   **Обход блокировок:** Использование Playwright (Chromium) для получения кук и обхода защиты, поддержка прокси со сменой IP.
*   **Гибкие фильтры:** Цена, площадь, ключевые слова, стоп-слова, география.
*   **Уведомления:** Отправка найденных вариантов в Telegram (через бота пользователя) или VK.
*   **История:** База данных SQLite (`database.db`) для исключения дубликатов.

## Технологии

*   **FastAPI** — API управление задачами.
*   **BeautifulSoup4 / curl-cffi** — парсинг контента.
*   **Playwright** — эмуляция браузера для обхода защиты.
*   **Threading** — параллельное выполнение задач.

## Установка и запуск

### Локально
1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
Установите браузер Playwright:
code
Bash
playwright install chromium
Запустите сервис:
code
Bash
python api.py
Сервис будет доступен на порту 8001. Swagger: http://localhost:8001/docs
Через Docker
Сервис запускается в составе общего стека через docker-compose оркестратора ParserHub.
API Endpoints
POST /parse/start — запуск новой задачи парсинга (принимает ссылки, кол-во страниц и токены уведомлений).
GET /parse/status/{task_id} — текущий прогресс, количество найденных и отфильтрованных объявлений.
POST /parse/stop/{task_id} — принудительная остановка задачи.
GET /health — проверка работоспособности.
Структура логов
Логи работы парсеров сохраняются в папку logs/, подробная информация о запросах выводится в консоль.